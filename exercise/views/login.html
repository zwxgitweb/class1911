<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>denglu</title>
    <link rel="stylesheet" href="./static/style.css">
</head>

<body>
    <div class="wrap">
        <p>用户名 ： <input type="text" class="user"></p>
        <p>密码 ： <input type="text" class="pwd"></p>
        <p><button class="zhu">注册</button><button class="deng">登录</button></p>
    </div>

    <script>
        let user = document.querySelector('.user');
        let pwd = document.querySelector('.pwd');
        let zhu = document.querySelector('.zhu');
        let deng = document.querySelector('.deng');
        deng.onclick = function () {
            let userVal = user.value;
            let pwdVal = pwd.value;
            let params = {
                user:userVal,
                pwd:pwdVal,
            }
            fetch('/api/login',{
                body:JSON.stringify(params), 
                method:'POST',
                headers: {
					// 'user-agent': 'Mozilla/4.0 MDN Example',
					'content-type': 'application/json'
				},
            }).then( (text) => {
                return text.text();    // 返回向后台请求的 数据
            }).then((res) => {
                res = JSON.parse(res);
                if(res.code){
                    alert('登录成功')
                    location.href = 'http://localhost:8080';
                }else{
                    alert('用户名或密码错误')
                }
               
            })

        }

        zhu.onclick = function () {
            let userVal = user.value;
            let pwdVal = pwd.value;
            let params = {
                user:userVal,
                pwd:pwdVal,
            }
            fetch('/api/zhuce',{
                body:JSON.stringify(params),
                method:'POST',
                headers: {
					// 'user-agent': 'Mozilla/4.0 MDN Example',
					'content-type': 'application/json'
				},
            }).then( (text) => {
                return text.text();    // 返回向后台请求的 数据
            }).then((res) => {
                alert('注册成功')
                
               
            })

        }
    </script>
</body>

</html>